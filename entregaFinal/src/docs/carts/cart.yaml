paths:
  /api/carts/{cartId}/products/{productId}: 
    post:
      summary: Add product to cart
      tags:
        - Carts
      parameters:
      - name: cartId
        in: path
        required: true
        schema:
          $type: string
        escription: Cart ID autogenerated by the database
      - name: productId
        in: path
        required: true
        schema:
          $type: string
        description: Product ID autogenerated by the database
      requestBody:
        required: True
        content:
          application/json:
            schema:
              $ref: '#/components/requestBodies/quantity'

      responses:
        '200':
          description: successfully loaded cart
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/carts"
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized user
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/unauthorizedUser'
        '403':
          description: The user does not have the necessary permissions
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/noAccess'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                type: object
                items:
                  $ref: "#/components/schemas/Error"
        '500':
          description: Error interno del servidor

components:
  schemas:
    unauthorizedUser:
      type: object
      properties:
        message:
          type: string
          description: Error message
      example:
        message: Unauthorized user

    noAccess:
      type: object
      properties:
        message:
          type: string
          description: Error message
      example:
        message: The user does not have the necessary permissions
    Error:
      type: object
      properties:
        message:
          type: string
          description: Error message
      example:
        message: Error message


    carts:
      type: object
      properties:
        _id:
          type: ObjectId
          description: Cart id - MongoDB autogenerated id
        products:
          type: array
          description: Cart products
          properties:
            products:
              type: ObjectId
              description: Product id - MongoDB autogenerated id
            quantity:
              type: number
              description: Product quantity
      example:
        _id: ObjectId ("fb7hdsfh4hs47h4")
        products:
          _id: ObjectId ("fb7hdsfh4hs47h5")
          quantity: 10

  requestBodies:
    quantity:
      type: object
      properties:
        quantity: 
          type: number
          description: Product quantity
      example:
        quantity: 5